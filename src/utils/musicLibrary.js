// –ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ RockReplay
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤ –ø–æ –∂–∞–Ω—Ä–∞–º

export const musicLibrary = {
  'heavy-metal': [
    {
      id: 1,
      title: 'Master of Puppets',
      artist: 'Metallica',
      filename: 'metallica_master_of_puppets.mp3',
      cover: 'ü§ò',
      duration: '8:35'
    },
    {
      id: 2,
      title: 'The Number of the Beast',
      artist: 'Iron Maiden',
      filename: 'iron_maiden_number_of_the_beast.mp3',
      cover: 'üëπ',
      duration: '4:50'
    },
    {
      id: 3,
      title: 'Breaking the Law',
      artist: 'Judas Priest',
      filename: 'judas_priest_breaking_the_law.mp3',
      cover: '‚öñÔ∏è',
      duration: '2:35'
    },
    {
      id: 4,
      title: 'Paranoid',
      artist: 'Black Sabbath',
      filename: 'black_sabbath_paranoid.mp3',
      cover: 'ü¶á',
      duration: '2:50'
    },
    {
      id: 5,
      title: 'Holy Diver',
      artist: 'Dio',
      filename: 'dio_holy_diver.mp3',
      cover: '‚ö°',
      duration: '5:53'
    }
  ],

  'hard-rock': [
    {
      id: 6,
      title: 'Back in Black',
      artist: 'AC/DC',
      filename: 'acdc_back_in_black.mp3',
      cover: 'üé∏',
      duration: '4:15'
    },
    {
      id: 7,
      title: 'Sweet Child O\' Mine',
      artist: 'Guns N\' Roses',
      filename: 'guns_n_roses_sweet_child_o_mine.mp3',
      cover: 'üåπ',
      duration: '5:03'
    },
    {
      id: 8,
      title: 'Smoke on the Water',
      artist: 'Deep Purple',
      filename: 'deep_purple_smoke_on_the_water.mp3',
      cover: 'üíú',
      duration: '5:40'
    },
    {
      id: 9,
      title: 'Stairway to Heaven',
      artist: 'Led Zeppelin',
      filename: 'led_zeppelin_stairway_to_heaven.mp3',
      cover: 'ü™ú',
      duration: '8:02'
    },
    {
      id: 10,
      title: 'We Will Rock You',
      artist: 'Queen',
      filename: 'queen_we_will_rock_you.mp3',
      cover: 'üëë',
      duration: '2:02'
    }
  ],

  'alternative': [
    {
      id: 11,
      title: 'Smells Like Teen Spirit',
      artist: 'Nirvana',
      filename: 'nirvana_smells_like_teen_spirit.mp3',
      cover: 'üé≠',
      duration: '5:01'
    },
    {
      id: 12,
      title: 'Creep',
      artist: 'Radiohead',
      filename: 'radiohead_creep.mp3',
      cover: 'üåô',
      duration: '3:58'
    },
    {
      id: 13,
      title: 'Black',
      artist: 'Pearl Jam',
      filename: 'pearl_jam_black.mp3',
      cover: 'üñ§',
      duration: '5:43'
    },
    {
      id: 14,
      title: 'Man in the Box',
      artist: 'Alice in Chains',
      filename: 'alice_in_chains_man_in_the_box.mp3',
      cover: 'üì¶',
      duration: '4:46'
    },
    {
      id: 15,
      title: 'Outshined',
      artist: 'Soundgarden',
      filename: 'soundgarden_outshined.mp3',
      cover: '‚òÄÔ∏è',
      duration: '5:10'
    }
  ],

  'progressive': [
    {
      id: 16,
      title: 'Tom Sawyer',
      artist: 'Rush',
      filename: 'rush_tom_sawyer.mp3',
      cover: 'üåÄ',
      duration: '4:33'
    },
    {
      id: 17,
      title: 'Schism',
      artist: 'Tool',
      filename: 'tool_schism.mp3',
      cover: 'üîß',
      duration: '9:29'
    },
    {
      id: 18,
      title: 'Pull Me Under',
      artist: 'Dream Theater',
      filename: 'dream_theater_pull_me_under.mp3',
      cover: 'üéπ',
      duration: '8:14'
    },
    {
      id: 19,
      title: 'Trains',
      artist: 'Porcupine Tree',
      filename: 'porcupine_tree_trains.mp3',
      cover: 'üöÇ',
      duration: '5:56'
    },
    {
      id: 20,
      title: 'The Spirit Carries On',
      artist: 'Dream Theater',
      filename: 'dream_theater_spirit_carries_on.mp3',
      cover: 'üëª',
      duration: '6:38'
    }
  ],

  'symphonic': [
    {
      id: 21,
      title: 'Nemo',
      artist: 'Nightwish',
      filename: 'nightwish_nemo.mp3',
      cover: 'üéº',
      duration: '4:36'
    },
    {
      id: 22,
      title: 'Storm the Sorrow',
      artist: 'Epica',
      filename: 'epica_storm_the_sorrow.mp3',
      cover: '‚õàÔ∏è',
      duration: '5:07'
    },
    {
      id: 23,
      title: 'Angels',
      artist: 'Within Temptation',
      filename: 'within_temptation_angels.mp3',
      cover: 'üëº',
      duration: '4:00'
    },
    {
      id: 24,
      title: 'To Holmgard and Beyond',
      artist: 'Turisas',
      filename: 'turisas_to_holmgard_and_beyond.mp3',
      cover: '‚öîÔ∏è',
      duration: '5:34'
    },
    {
      id: 25,
      title: 'Gothic Kabbalah',
      artist: 'Therion',
      filename: 'therion_gothic_kabbalah.mp3',
      cover: 'üîÆ',
      duration: '4:33'
    }
  ],

  'metalcore': [
    {
      id: 26,
      title: 'My Curse',
      artist: 'Killswitch Engage',
      filename: 'killswitch_engage_my_curse.mp3',
      cover: '‚ö°',
      duration: '4:04'
    },
    {
      id: 27,
      title: 'Tears Don\'t Fall',
      artist: 'Bullet for My Valentine',
      filename: 'bullet_for_my_valentine_tears_dont_fall.mp3',
      cover: 'üíß',
      duration: '5:48'
    },
    {
      id: 28,
      title: 'Unholy Confessions',
      artist: 'Avenged Sevenfold',
      filename: 'avenged_sevenfold_unholy_confessions.mp3',
      cover: 'üíÄ',
      duration: '4:30'
    },
    {
      id: 29,
      title: '94 Hours',
      artist: 'As I Lay Dying',
      filename: 'as_i_lay_dying_94_hours.mp3',
      cover: '‚è∞',
      duration: '2:21'
    },
    {
      id: 30,
      title: 'B.Y.O.B.',
      artist: 'System of a Down',
      filename: 'system_of_a_down_byob.mp3',
      cover: 'üé™',
      duration: '4:15'
    }
  ]
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è URL —Ñ–∞–π–ª–∞
export function getMusicUrl(genre, filename) {
  return `/music/${genre}/${filename}`;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —Ç—Ä–µ–∫–æ–≤ –∂–∞–Ω—Ä–∞
export function getGenreTracks(genre) {
  return musicLibrary[genre] || [];
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∂–∞–Ω—Ä–æ–≤
export function getAllGenres() {
  return Object.keys(musicLibrary);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç—Ä–µ–∫–∞ –ø–æ ID
export function findTrackById(trackId) {
  for (const genre of Object.keys(musicLibrary)) {
    const track = musicLibrary[genre].find(t => t.id === trackId);
    if (track) {
      return { ...track, genre, url: getMusicUrl(genre, track.filename) };
    }
  }
  return null;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ç—Ä–µ–∫–∞
export function getRandomTrack() {
  const allGenres = getAllGenres();
  const randomGenre = allGenres[Math.floor(Math.random() * allGenres.length)];
  const genreTracks = getGenreTracks(randomGenre);
  const randomTrack = genreTracks[Math.floor(Math.random() * genreTracks.length)];
  
  return {
    ...randomTrack,
    genre: randomGenre,
    url: getMusicUrl(randomGenre, randomTrack.filename)
  };
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
export async function validateMusicFile(genre, filename) {
  try {
    const response = await fetch(getMusicUrl(genre, filename), { method: 'HEAD' });
    return response.ok;
  } catch (error) {
    console.warn(`Music file not found: ${genre}/${filename}`);
    return false;
  }
}